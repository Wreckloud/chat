# WolfChat 微信小程序 🐺

> 狼群聚集地 · 即时通讯小程序

## 项目简介

WolfChat 是一款基于微信小程序的即时通讯应用，提供群组聊天、成员管理、权限控制等功能。

## 技术栈

- **框架**: 微信小程序原生
- **UI组件**: Vant Weapp
- **后端**: Spring Boot + JWT
- **主题**: 狼主题（紫色渐变）

## 项目结构

```
miniprogram/
├── api/                    # API接口封装
│   ├── account.js         # 账号相关
│   ├── group.js           # 群组相关
│   ├── member.js          # 成员相关
│   └── setting.js         # 设置相关
├── pages/                 # 页面
│   ├── login/            # 登录页
│   ├── tabs/             # 首页Tab
│   ├── group-create/     # 创建群组
│   └── group-detail/     # 群组详情
├── utils/                 # 工具类
│   ├── config.js         # 配置
│   ├── request.js        # 请求封装
│   └── auth.js           # 认证工具
├── images/                # 图片资源
├── app.js                # 小程序入口
├── app.json              # 全局配置
└── app.wxss              # 全局样式
```

## 功能清单

### ✅ 已完成

1. **登录注册**
   - 手机号验证码登录
   - JWT Token认证
   - 自动注册

2. **群组管理**
   - 创建群组
   - 查看群组列表
   - 查看群组详情
   - 修改群信息（群主）
   - 解散群组（群主）

3. **成员管理**
   - 邀请成员
   - 踢出成员（群主/管理员）
   - 退出群组
   - 修改群昵称
   - 设置/取消管理员（群主）

4. **群组设置**
   - 发布群公告（群主/管理员）
   - 查看群公告
   - 全员禁言（群主）
   - 禁言成员（群主/管理员）
   - 转让群主（群主）

5. **权限控制**
   - 基于角色的权限判断
   - 动态显示/隐藏功能
   - 长按成员显示操作菜单

### 🚧 待开发

- 消息聊天
- 好友管理
- 文件/图片/视频分享
- 消息免打扰
- WebSocket实时通信

## 快速开始

### 1. 安装依赖

```bash
npm install
```

### 2. 配置后端地址

修改 `utils/config.js` 中的 `baseUrl`:

```javascript
baseUrl: 'http://localhost:8080'  // 开发环境
```

### 3. 构建 npm

在微信开发者工具中：

1. 点击工具 → 构建 npm
2. 等待构建完成

### 4. 启动后端

确保后端服务已启动：

```bash
cd ../../backend
mvn spring-boot:run
```

### 5. 开始开发

1. 使用微信开发者工具打开 `miniprogram` 目录
2. 编译运行
3. 开始联调测试

## 测试账号

### 开发测试流程

1. 在登录页输入手机号（如：13800138000）
2. 点击"获取验证码"
3. 查看后端控制台日志获取验证码
4. 输入验证码登录
5. 首次登录自动注册

### 测试功能

1. **创建群组**：点击"创建群组"按钮
2. **邀请成员**：在群组详情页点击"邀请"
3. **管理功能**：长按成员显示操作菜单
4. **权限测试**：用不同角色的账号登录测试

## 注意事项

1. **图片资源**：需要准备以下图片
   - `/images/wolf-logo.png` - 狼Logo
   - `/images/default-group.png` - 默认群头像
   - `/images/default-avatar.png` - 默认用户头像
   - `/images/tab-home.png` - Tab图标
   - `/images/tab-home-active.png` - Tab选中图标

2. **Token管理**：
   - Token存储在本地storage
   - Token格式：`Bearer <token>`
   - Token过期会自动跳转登录页

3. **权限说明**：
   - **群主**：拥有所有权限
   - **管理员**：可以管理普通成员、发布公告
   - **成员**：只能查看和退出

## 开发规范

### 代码风格

- 使用2空格缩进
- 使用单引号
- 文件名使用kebab-case
- 组件名使用PascalCase

### 注释规范

```javascript
/**
 * 函数说明
 * @param {Type} param 参数说明
 * @returns {Type} 返回值说明
 */
```

### API调用

```javascript
// 使用封装的API
groupApi.getMyGroups()
  .then(groups => {
    // 成功处理
  })
  .catch(err => {
    // 错误处理
  });
```

## 常见问题

### Q1: 提示"未登录或登录已过期"？

A: Token过期，需要重新登录。

### Q2: 验证码在哪里查看？

A: 查看后端控制台日志。

### Q3: 为什么有些功能看不到？

A: 根据用户角色动态显示，检查你的角色权限。

### Q4: 如何修改主题颜色？

A: 修改 `utils/config.js` 中的 `theme` 配置。

## 更新日志

### v1.0.0 (2024-12-18)

- ✨ 完成登录注册功能
- ✨ 完成群组管理功能
- ✨ 完成成员管理功能
- ✨ 完成群组设置功能
- ✨ 完成权限控制功能
- 🎨 使用Vant Weapp组件库
- 🎨 采用狼主题紫色渐变设计

## 作者

**Wreckloud**

## License

MIT

---

**WolfChat © 2024 - 狼群聚集地 🐺**

